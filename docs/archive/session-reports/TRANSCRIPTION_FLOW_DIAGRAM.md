# Transcription System - Complete Flow Diagram

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER WORKFLOW                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. User uploads audio to Google Drive
   â”‚
   â”œâ”€â†’ audio-file.m4a saved in Drive
   â””â”€â†’ Drive File ID generated

2. User navigates to /transcribe page
   â”‚
   â”œâ”€â†’ Browses Google Drive folders
   â”œâ”€â†’ Finds audio file
   â””â”€â†’ Clicks "Transcribe" button

3. Transcription starts
   â”‚
   â”œâ”€â†’ API: /api/transcribe/drive-assemblyai
   â”œâ”€â†’ Downloads audio from Google Drive
   â”œâ”€â†’ Uploads to AssemblyAI
   â”œâ”€â†’ Starts transcription with speaker_labels: true
   â””â”€â†’ Returns job ID

4. User waits (progress bar shows status)
   â”‚
   â”œâ”€â†’ Frontend polls /api/transcribe/assemblyai?jobId=...
   â”œâ”€â†’ Progress: 0% â†’ 30% â†’ 60% â†’ 90% â†’ 100%
   â””â”€â†’ Status changes: queued â†’ processing â†’ completed

5. User clicks "Export All to Drive"
   â”‚
   â”œâ”€â†’ API: /api/transcribe/save-to-drive
   â”œâ”€â†’ Creates 4 files
   â””â”€â†’ Uploads to organized folder

6. User opens Google Drive
   â”‚
   â””â”€â†’ Finds files in /Transcriptions/[date]/[name]/
```

---

## Detailed Component Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TRANSCRIPTION PROCESS                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Google Drive â”‚ â† User uploads audio file
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ File ID: 1abc...xyz
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /transcribe Page     â”‚
â”‚ (Frontend)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - Browse folders     â”‚
â”‚ - Select audio file  â”‚
â”‚ - Click "Transcribe" â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ POST /api/transcribe/drive-assemblyai
       â”‚ { fileId, fileName, userId, projectId }
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Drive-AssemblyAI Endpoint    â”‚
â”‚ (Backend)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Get Google OAuth token    â”‚
â”‚ 2. Download audio from Drive â”‚
â”‚ 3. Upload to AssemblyAI      â”‚
â”‚ 4. Request transcription:    â”‚
â”‚    - speaker_labels: true    â”‚
â”‚ 5. Save to database:         â”‚
â”‚    - job_id                  â”‚
â”‚    - assemblyai_id           â”‚
â”‚    - googleDriveFileId       â”‚
â”‚    - mimeType                â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Returns: { success, jobId }
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AssemblyAI Service   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - Transcribes audio  â”‚
â”‚ - Detects speakers   â”‚
â”‚ - Labels utterances  â”‚
â”‚ - Adds timestamps    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Polling every 5 seconds
       â”‚ GET /api/transcribe/assemblyai?jobId=...
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AssemblyAI Endpoint          â”‚
â”‚ (Backend - GET)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Check database for job    â”‚
â”‚ 2. Query AssemblyAI status   â”‚
â”‚ 3. Update database           â”‚
â”‚ 4. Return status/result      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ When completed:
       â”‚ {
       â”‚   status: "completed",
       â”‚   result: {
       â”‚     text: "...",
       â”‚     utterances: [
       â”‚       { speaker: "A", text: "..." },
       â”‚       { speaker: "B", text: "..." }
       â”‚     ]
       â”‚   }
       â”‚ }
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend             â”‚
â”‚ (Transcribe Page)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Shows:               â”‚
â”‚ âœ… Complete          â”‚
â”‚ ğŸ“„ TXT               â”‚
â”‚ ğŸ“¦ JSON              â”‚
â”‚ ğŸ¬ SRT               â”‚
â”‚ â˜ï¸ Export to Drive   â”‚ â† User clicks this
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ POST /api/transcribe/save-to-drive
       â”‚ { transcriptionId, userId, multiFormat: true }
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Save-to-Drive Endpoint                                          â”‚
â”‚ (Backend)                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Fetch transcription from database                           â”‚
â”‚ 2. Create folder structure:                                    â”‚
â”‚    /Transcriptions/[YYYY-MM-DD]/[name]/                        â”‚
â”‚                                                                 â”‚
â”‚ 3. Create 4 files:                                             â”‚
â”‚                                                                 â”‚
â”‚    FILE 1: Original Audio                                      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚    â”‚ - Download from Drive          â”‚                          â”‚
â”‚    â”‚   (using googleDriveFileId)    â”‚                          â”‚
â”‚    â”‚ - Upload to organized folder   â”‚                          â”‚
â”‚    â”‚ - Preserve MIME type           â”‚                          â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                 â”‚
â”‚    FILE 2: Full Transcription                                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚    â”‚ Format:                        â”‚                          â”‚
â”‚    â”‚ [0:00] Speaker A: text         â”‚                          â”‚
â”‚    â”‚ [0:15] Speaker B: text         â”‚                          â”‚
â”‚    â”‚ ...                            â”‚                          â”‚
â”‚    â”‚ Tags: meeting, standup         â”‚                          â”‚
â”‚    â”‚ Action Items:                  â”‚                          â”‚
â”‚    â”‚ 1. Complete API by Friday      â”‚                          â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                 â”‚
â”‚    FILE 3: Speaker-Separated                                   â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚    â”‚ Format:                        â”‚                          â”‚
â”‚    â”‚ --- SPEAKER A ---              â”‚                          â”‚
â”‚    â”‚ [0:00] text                    â”‚                          â”‚
â”‚    â”‚ [0:45] text                    â”‚                          â”‚
â”‚    â”‚                                â”‚                          â”‚
â”‚    â”‚ --- SPEAKER B ---              â”‚                          â”‚
â”‚    â”‚ [0:15] text                    â”‚                          â”‚
â”‚    â”‚ [1:20] text                    â”‚                          â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                 â”‚
â”‚    FILE 4: Metadata JSON                                       â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚    â”‚ {                              â”‚                          â”‚
â”‚    â”‚   speaker_count: 2,            â”‚                          â”‚
â”‚    â”‚   speakers: [                  â”‚                          â”‚
â”‚    â”‚     {                          â”‚                          â”‚
â”‚    â”‚       speaker_id: "A",         â”‚                          â”‚
â”‚    â”‚       utterance_count: 23,     â”‚                          â”‚
â”‚    â”‚       word_count: 1456         â”‚                          â”‚
â”‚    â”‚     }                          â”‚                          â”‚
â”‚    â”‚   ],                           â”‚                          â”‚
â”‚    â”‚   utterances: [...],           â”‚                          â”‚
â”‚    â”‚   auto_tags: [...],            â”‚                          â”‚
â”‚    â”‚   action_items: [...]          â”‚                          â”‚
â”‚    â”‚ }                              â”‚                          â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                 â”‚
â”‚ 4. Return success with file list                               â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ Returns:
      â”‚ {
      â”‚   success: true,
      â”‚   files: [
      â”‚     { format: "Original Audio", name: "...", webViewLink: "..." },
      â”‚     { format: "Full Transcription (TXT)", ... },
      â”‚     { format: "Speaker-Separated (TXT)", ... },
      â”‚     { format: "Metadata (JSON)", ... }
      â”‚   ]
      â”‚ }
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Shows success alert: â”‚
â”‚                      â”‚
â”‚ âœ… Exported 4 files  â”‚
â”‚ â€¢ Original Audio     â”‚
â”‚ â€¢ Full Transcript    â”‚
â”‚ â€¢ Speaker-Separated  â”‚
â”‚ â€¢ Metadata           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DATA TRANSFORMATIONS                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. AUDIO FILE
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ meeting.m4a     â”‚
   â”‚ Size: 45.2 MB   â”‚
   â”‚ Duration: 15:42 â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â†“

2. ASSEMBLYAI TRANSCRIPTION
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ {                                        â”‚
   â”‚   text: "Welcome everyone...",           â”‚
   â”‚   audio_duration: 942,                   â”‚
   â”‚   utterances: [                          â”‚
   â”‚     {                                    â”‚
   â”‚       speaker: "A",                      â”‚
   â”‚       start: 0,                          â”‚
   â”‚       end: 5000,                         â”‚
   â”‚       text: "Welcome everyone...",       â”‚
   â”‚       confidence: 0.95                   â”‚
   â”‚     },                                   â”‚
   â”‚     {                                    â”‚
   â”‚       speaker: "B",                      â”‚
   â”‚       start: 15000,                      â”‚
   â”‚       end: 20000,                        â”‚
   â”‚       text: "Thanks for having me...",   â”‚
   â”‚       confidence: 0.93                   â”‚
   â”‚     }                                    â”‚
   â”‚   ]                                      â”‚
   â”‚ }                                        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â†“

3. DATABASE RECORD
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ audio_transcriptions                     â”‚
   â”‚ â”œâ”€ id: 123                               â”‚
   â”‚ â”œâ”€ user_id: "zach"                       â”‚
   â”‚ â”œâ”€ filename: "meeting.m4a"               â”‚
   â”‚ â”œâ”€ duration: 942                         â”‚
   â”‚ â”œâ”€ text: "Welcome everyone..."           â”‚
   â”‚ â”œâ”€ assemblyai_id: "abc123"               â”‚
   â”‚ â”œâ”€ status: "completed"                   â”‚
   â”‚ â””â”€ metadata: {                           â”‚
   â”‚      googleDriveFileId: "1abc...xyz",    â”‚
   â”‚      mimeType: "audio/m4a",              â”‚
   â”‚      utterances: [...],                  â”‚
   â”‚      auto_tags: ["meeting", "standup"],  â”‚
   â”‚      action_items: [...]                 â”‚
   â”‚    }                                     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â†“

4. EXPORT TO DRIVE (4 FILES)

   FILE 1: meeting.m4a
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ [Binary audio data]    â”‚
   â”‚ Size: 45.2 MB          â”‚
   â”‚ Type: audio/m4a        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   FILE 2: full-transcription.txt
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ TRANSCRIPTION: meeting.m4a         â”‚
   â”‚ Duration: 15:42                    â”‚
   â”‚ Date: 1/24/2025, 10:30:00 AM       â”‚
   â”‚                                    â”‚
   â”‚ [0:00] Speaker A: Welcome...       â”‚
   â”‚ [0:15] Speaker B: Thanks...        â”‚
   â”‚ [0:45] Speaker A: Great point...   â”‚
   â”‚                                    â”‚
   â”‚ TAGS: meeting, standup, team       â”‚
   â”‚ ACTION ITEMS:                      â”‚
   â”‚ 1. Complete API by Friday          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   FILE 3: speaker-separated.txt
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ --- SPEAKER A ---                  â”‚
   â”‚ [0:00] Welcome everyone...         â”‚
   â”‚ [0:45] Great point...              â”‚
   â”‚                                    â”‚
   â”‚ --- SPEAKER B ---                  â”‚
   â”‚ [0:15] Thanks for having me...     â”‚
   â”‚ [1:20] Almost done...              â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   FILE 4: metadata.json
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ {                                  â”‚
   â”‚   "filename": "meeting.m4a",       â”‚
   â”‚   "speaker_count": 2,              â”‚
   â”‚   "speakers": [                    â”‚
   â”‚     {                              â”‚
   â”‚       "speaker_id": "A",           â”‚
   â”‚       "utterance_count": 23        â”‚
   â”‚     },                             â”‚
   â”‚     {                              â”‚
   â”‚       "speaker_id": "B",           â”‚
   â”‚       "utterance_count": 22        â”‚
   â”‚     }                              â”‚
   â”‚   ],                               â”‚
   â”‚   "utterances": [...],             â”‚
   â”‚   "auto_tags": [...]               â”‚
   â”‚ }                                  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Folder Organization

```
Google Drive
â”‚
â””â”€â”€â”€ Transcriptions/                    â† Main folder (auto-created)
     â”‚
     â”œâ”€â”€â”€ 2025-01-24/                   â† Date folders (auto-created)
     â”‚    â”‚
     â”‚    â”œâ”€â”€â”€ team-standup-morning/    â† Transcription folders (auto-created)
     â”‚    â”‚    â”œâ”€ team-standup-morning.m4a
     â”‚    â”‚    â”œâ”€ full-transcription.txt
     â”‚    â”‚    â”œâ”€ speaker-separated.txt
     â”‚    â”‚    â””â”€ metadata.json
     â”‚    â”‚
     â”‚    â”œâ”€â”€â”€ client-call-acme-corp/
     â”‚    â”‚    â”œâ”€ client-call-acme-corp.m4a
     â”‚    â”‚    â”œâ”€ full-transcription.txt
     â”‚    â”‚    â”œâ”€ speaker-separated.txt
     â”‚    â”‚    â””â”€ metadata.json
     â”‚    â”‚
     â”‚    â””â”€â”€â”€ interview-candidate-john/
     â”‚         â”œâ”€ interview-candidate-john.m4a
     â”‚         â”œâ”€ full-transcription.txt
     â”‚         â”œâ”€ speaker-separated.txt
     â”‚         â””â”€ metadata.json
     â”‚
     â”œâ”€â”€â”€ 2025-01-25/
     â”‚    â”œâ”€â”€â”€ morning-meeting/
     â”‚    â””â”€â”€â”€ afternoon-brainstorm/
     â”‚
     â””â”€â”€â”€ 2025-01-26/
          â”œâ”€â”€â”€ weekly-review/
          â””â”€â”€â”€ planning-session/
```

**Benefits:**
- Easy to find by date
- All files for one transcription grouped together
- Scalable (handles thousands of transcriptions)
- Chronological browsing

---

## Speaker Separation Process

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SPEAKER DIARIZATION FLOW                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Audio Input
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Mixed audio track    â”‚
   â”‚ Multiple speakers    â”‚
   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â†“

2. AssemblyAI Processing
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ - Analyzes voice characteristics   â”‚
   â”‚ - Detects speaker changes          â”‚
   â”‚ - Assigns speaker labels (A, B, C) â”‚
   â”‚ - Adds timestamps                  â”‚
   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â†“

3. Utterances Generated
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ [                                            â”‚
   â”‚   { speaker: "A", start: 0,     text: "..." }, â”‚
   â”‚   { speaker: "B", start: 15000, text: "..." }, â”‚
   â”‚   { speaker: "A", start: 45000, text: "..." }, â”‚
   â”‚   { speaker: "B", start: 80000, text: "..." }, â”‚
   â”‚   { speaker: "C", start: 120000, text: "..." } â”‚
   â”‚ ]                                            â”‚
   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â†“

4. Two Output Formats

   A) Full Transcription (chronological)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ [0:00] Speaker A: ...          â”‚
   â”‚ [0:15] Speaker B: ...          â”‚
   â”‚ [0:45] Speaker A: ...          â”‚
   â”‚ [1:20] Speaker B: ...          â”‚
   â”‚ [2:00] Speaker C: ...          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   B) Speaker-Separated (grouped)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ --- SPEAKER A ---              â”‚
   â”‚ [0:00] ...                     â”‚
   â”‚ [0:45] ...                     â”‚
   â”‚                                â”‚
   â”‚ --- SPEAKER B ---              â”‚
   â”‚ [0:15] ...                     â”‚
   â”‚ [1:20] ...                     â”‚
   â”‚                                â”‚
   â”‚ --- SPEAKER C ---              â”‚
   â”‚ [2:00] ...                     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Accuracy Factors:**
- Audio quality (noise, clarity)
- Speaker distinction (different voices)
- Overlap (speakers talking over each other)
- Duration (longer = more accurate)

---

## Error Handling Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ERROR HANDLING FLOW                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Scenario 1: Original Audio Not Found
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ googleDriveFileId = null â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Skip original audio      â”‚
â”‚ Continue with 3 files:   â”‚
â”‚ - full-transcription.txt â”‚
â”‚ - speaker-separated.txt  â”‚
â”‚ - metadata.json          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Scenario 2: Speaker Separation Unavailable
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ utterances = []          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ speaker-separated.txt shows:     â”‚
â”‚ "No speaker separation available"â”‚
â”‚ + plain text transcript          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Scenario 3: Folder Creation Fails
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Error creating folder    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Upload to Drive root     â”‚
â”‚ Log warning              â”‚
â”‚ Continue export          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Scenario 4: Authentication Expired
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Google token expired     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Return 401 error         â”‚
â”‚ Show: "Please sign in"   â”‚
â”‚ User clicks sign in      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

All Errors:
- Logged to console
- User-friendly message shown
- Retry option available
- System continues gracefully
```

---

## Performance Metrics

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PERFORMANCE METRICS                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Transcription Time
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5-minute audio  â†’ 3-5 min  â”‚
â”‚ 15-minute audio â†’ 8-15 min â”‚
â”‚ 30-minute audio â†’ 20-30 minâ”‚
â”‚ 1-hour audio    â†’ 30-60 minâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Export Time
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Small (< 10MB)  â†’ 5-10 sec â”‚
â”‚ Medium (10-50MB)â†’ 10-20 secâ”‚
â”‚ Large (50MB+)   â†’ 20-40 secâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

File Sizes
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Original audio: 60MB per hour       â”‚
â”‚ Full transcript: 10-50KB per hour   â”‚
â”‚ Speaker-separated: 10-50KB per hour â”‚
â”‚ Metadata JSON: 100KB-5MB per hour   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Cost
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Transcription: $0.41/hour  â”‚
â”‚ Storage: Free (in Drive)   â”‚
â”‚ Export: Free               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Created**: 2025-01-24
**Version**: 2.0
**Status**: âœ… Production Ready
